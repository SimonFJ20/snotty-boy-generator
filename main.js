"use strict";
const htmlVideo = document.querySelector('#video');
const htmlCanvas1 = document.querySelector('#canvas1');
const htmlCanvas2 = document.querySelector('#canvas2');
const htmlFileInput = document.querySelector('#file');
const textInput1 = document.querySelector('#t1');
const textInput2 = document.querySelector('#t2');
const textInput3 = document.querySelector('#t3');
const renderButton = document.querySelector('#render');
const width = 500;
const height = width / 16 * 9;
const context1 = htmlCanvas1.getContext('2d');
const context2 = htmlCanvas2.getContext('2d');
const loop = () => {
    if (htmlVideo.paused || htmlVideo.ended)
        return;
    context1.drawImage(htmlVideo, 0, 0, width, height);
    context1.fillStyle = '#ff0000';
    context1.font = '24px Monospace';
    context1.fillText('Fuck dig', 200, 200);
    window.requestAnimationFrame(() => loop());
};
const main = () => {
    htmlVideo.addEventListener('play', () => {
        htmlCanvas1.width = width;
        htmlCanvas1.height = height;
        htmlCanvas2.width = width;
        htmlCanvas2.height = height;
        htmlVideo.width = width;
        htmlVideo.height = height;
        loop();
    });
    htmlFileInput.addEventListener('change', () => {
        if (htmlFileInput.files === null)
            return;
        const file = htmlFileInput.files[0];
        const fileReader = new FileReader();
        fileReader.addEventListener('loadend', (e) => {
            if (e.target === null)
                return;
            const ab = e.target.result;
            const blob = window.URL.createObjectURL(ab);
            const a = document.createElement('a');
            a.href = blob;
            a.target = 'blank';
            a.click();
        });
    });
};
main();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW1CLFFBQVEsQ0FBRSxDQUFDO0FBQ3RFLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLFVBQVUsQ0FBRSxDQUFDO0FBQzNFLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLFVBQVUsQ0FBRSxDQUFDO0FBQzNFLE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW1CLE9BQU8sQ0FBRSxDQUFDO0FBQ3pFLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW1CLEtBQUssQ0FBRSxDQUFDO0FBQ3BFLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW1CLEtBQUssQ0FBRSxDQUFDO0FBQ3BFLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW1CLEtBQUssQ0FBRSxDQUFDO0FBQ3BFLE1BQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQW9CLFNBQVMsQ0FBRSxDQUFDO0FBRTNFLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQztBQUNsQixNQUFNLE1BQU0sR0FBRyxLQUFLLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUc5QixNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxDQUFDO0FBQy9DLE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFFLENBQUM7QUFFL0MsTUFBTSxJQUFJLEdBQUcsR0FBRyxFQUFFO0lBQ2QsSUFBSSxTQUFTLENBQUMsTUFBTSxJQUFJLFNBQVMsQ0FBQyxLQUFLO1FBQUUsT0FBTztJQUVoRCxRQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUVuRCxRQUFRLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQTtJQUM5QixRQUFRLENBQUMsSUFBSSxHQUFHLGdCQUFnQixDQUFBO0lBQ2hDLFFBQVEsQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUV4QyxNQUFNLENBQUMscUJBQXFCLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUMvQyxDQUFDLENBQUE7QUFFRCxNQUFNLElBQUksR0FBRyxHQUFHLEVBQUU7SUFFZCxTQUFTLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtRQUNwQyxXQUFXLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUMxQixXQUFXLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUM1QixXQUFXLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUMxQixXQUFXLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUM1QixTQUFTLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUN4QixTQUFTLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUMxQixJQUFJLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQyxDQUFDO0lBRUgsYUFBYSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7UUFDMUMsSUFBSSxhQUFhLENBQUMsS0FBSyxLQUFLLElBQUk7WUFBRSxPQUFPO1FBQ3pDLE1BQU0sSUFBSSxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEMsTUFBTSxVQUFVLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUNwQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDekMsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLElBQUk7Z0JBQUUsT0FBTztZQUM5QixNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUMzQixNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3RDLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ2QsQ0FBQyxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7WUFDbkIsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2QsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUVQLENBQUMsQ0FBQTtBQUdELElBQUksRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBodG1sVmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxWaWRlb0VsZW1lbnQ+KCcjdmlkZW8nKSE7XG5jb25zdCBodG1sQ2FudmFzMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTENhbnZhc0VsZW1lbnQ+KCcjY2FudmFzMScpITtcbmNvbnN0IGh0bWxDYW52YXMyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQ2FudmFzRWxlbWVudD4oJyNjYW52YXMyJykhO1xuY29uc3QgaHRtbEZpbGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oJyNmaWxlJykhO1xuY29uc3QgdGV4dElucHV0MSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oJyN0MScpITtcbmNvbnN0IHRleHRJbnB1dDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KCcjdDInKSE7XG5jb25zdCB0ZXh0SW5wdXQzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PignI3QzJykhO1xuY29uc3QgcmVuZGVyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oJyNyZW5kZXInKSE7XG5cbmNvbnN0IHdpZHRoID0gNTAwO1xuY29uc3QgaGVpZ2h0ID0gd2lkdGggLyAxNiAqIDk7XG5cblxuY29uc3QgY29udGV4dDEgPSBodG1sQ2FudmFzMS5nZXRDb250ZXh0KCcyZCcpITtcbmNvbnN0IGNvbnRleHQyID0gaHRtbENhbnZhczIuZ2V0Q29udGV4dCgnMmQnKSE7XG5cbmNvbnN0IGxvb3AgPSAoKSA9PiB7XG4gICAgaWYgKGh0bWxWaWRlby5wYXVzZWQgfHwgaHRtbFZpZGVvLmVuZGVkKSByZXR1cm47XG4gICAgXG4gICAgY29udGV4dDEuZHJhd0ltYWdlKGh0bWxWaWRlbywgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICBjb250ZXh0MS5maWxsU3R5bGUgPSAnI2ZmMDAwMCdcbiAgICBjb250ZXh0MS5mb250ID0gJzI0cHggTW9ub3NwYWNlJ1xuICAgIGNvbnRleHQxLmZpbGxUZXh0KCdGdWNrIGRpZycsIDIwMCwgMjAwKTtcblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gbG9vcCgpKTtcbn1cblxuY29uc3QgbWFpbiA9ICgpID0+IHtcbiAgICBcbiAgICBodG1sVmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheScsICgpID0+IHtcbiAgICAgICAgaHRtbENhbnZhczEud2lkdGggPSB3aWR0aDtcbiAgICAgICAgaHRtbENhbnZhczEuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBodG1sQ2FudmFzMi53aWR0aCA9IHdpZHRoO1xuICAgICAgICBodG1sQ2FudmFzMi5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGh0bWxWaWRlby53aWR0aCA9IHdpZHRoO1xuICAgICAgICBodG1sVmlkZW8uaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBsb29wKCk7XG4gICAgfSk7XG5cbiAgICBodG1sRmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgaWYgKGh0bWxGaWxlSW5wdXQuZmlsZXMgPT09IG51bGwpIHJldHVybjtcbiAgICAgICAgY29uc3QgZmlsZSA9IGh0bWxGaWxlSW5wdXQuZmlsZXNbMF07XG4gICAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICBmaWxlUmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBudWxsKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBhYiA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChhYik7XG4gICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgYS5ocmVmID0gYmxvYjtcbiAgICAgICAgICAgIGEudGFyZ2V0ID0gJ2JsYW5rJztcbiAgICAgICAgICAgIGEuY2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbn1cblxuXG5tYWluKCk7Il19